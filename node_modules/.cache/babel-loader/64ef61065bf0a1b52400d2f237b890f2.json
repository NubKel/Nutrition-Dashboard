{"ast":null,"code":"var _jsxFileName = \"/Users/stanyan/Desktop/nutrition-dashboard/src/component/PictureMatch/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Food from './food';\nimport axios from 'axios';\nimport './picture.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PictureMatch() {\n  _s();\n\n  const [foodData, setFoodData] = useState(null);\n\n  function search(e) {\n    e.preventDefault(); //获取图片文件，图片类型，图片大小\n\n    const file = e.target.files[0];\n    const type = file.type;\n    const size = file.size;\n    const regularType = ['image/png', 'image/jpg', 'image/jpeg']; //图片类型限制\n\n    if (regularType.indexOf(type.toLowerCase()) === -1) {\n      // Toast.fail('Only supports PNG images!')\n      return false;\n    } //图片大小限制\n\n\n    if (size && size > 5242880) {\n      // 5 * 1024 * 1024，size的单位是字节\n      // Toast.fail('The image size should less than 5M!')\n      return false;\n    } //图片文件转成base64格式\n\n\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      // setImgPreviewUrl(reader.result)\n      console.log(reader); //Base64转换成二进制\n\n      const dataURItoBlob = dataURI => {\n        const byteString = atob(dataURI.split(',')[1]);\n        const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n        const ab = new ArrayBuffer(byteString.length);\n        const ia = new Uint8Array(ab);\n\n        for (let i = 0; i < byteString.length; i++) {\n          ia[i] = byteString.charCodeAt(i);\n        }\n\n        return new Blob([ab], {\n          type: mimeString\n        });\n      };\n\n      const blob = dataURItoBlob(reader.result); // const blobFile = new File([blob], 'avatar', { type: blob.type })\n\n      const form = new FormData();\n      form.append(\"file\", blob);\n      const options = {\n        method: 'POST',\n        url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/food/images/analyze',\n        headers: {\n          'content-type': 'multipart/form-data; boundary=---011000010111000001101001',\n          'x-rapidapi-host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\n          'x-rapidapi-key': 'ca34833afamsh5ac992bc1103a7fp14ff01jsne781a4ca7f2a'\n        },\n        data: form\n      };\n      axios.request(options).then(function (response) {\n        console.log(response.data);\n        setFoodData(response.data);\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"discount card\",\n        style: {\n          '--delay': '.4s'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"controls\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"select-img-input\",\n            onChange: e => search(e),\n            type: \"file\",\n            name: \"fileSelect\",\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), foodData && /*#__PURE__*/_jsxDEV(Food, {\n          foodData: foodData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 11\n  }, this);\n}\n\n_s(PictureMatch, \"84hg0EQ0+VhbGfaP+rhpwEazJq0=\");\n\n_c = PictureMatch;\n\nvar _c;\n\n$RefreshReg$(_c, \"PictureMatch\");","map":{"version":3,"sources":["/Users/stanyan/Desktop/nutrition-dashboard/src/component/PictureMatch/index.jsx"],"names":["React","useState","Food","axios","PictureMatch","foodData","setFoodData","search","e","preventDefault","file","target","files","type","size","regularType","indexOf","toLowerCase","reader","FileReader","readAsDataURL","onloadend","console","log","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","blob","result","form","FormData","append","options","method","url","headers","data","request","then","response","catch","error"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Food from './food';\nimport axios from 'axios';\nimport './picture.css'\n\nexport default function PictureMatch() {\n  const [foodData, setFoodData] = useState(null);\n\n  function search(e) {\n    e.preventDefault()\n//获取图片文件，图片类型，图片大小\n    const file = e.target.files[0]\n    const type = file.type\n    const size = file.size\n    const regularType = ['image/png', 'image/jpg', 'image/jpeg']\n//图片类型限制\n    if (regularType.indexOf(type.toLowerCase()) === -1) {\n    // Toast.fail('Only supports PNG images!')\n    return false\n    }\n//图片大小限制\n    if (size && size > 5242880) {\n    // 5 * 1024 * 1024，size的单位是字节\n    // Toast.fail('The image size should less than 5M!')\n    return false\n    }\n//图片文件转成base64格式\n    const reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onloadend = () => {\n    // setImgPreviewUrl(reader.result)\n    console.log(reader);\n    \n    //Base64转换成二进制\n    const dataURItoBlob=(dataURI)=> {\n        const byteString = atob(dataURI.split(',')[1])\n        const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\n        const ab = new ArrayBuffer(byteString.length)\n        const ia = new Uint8Array(ab)\n        for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i)\n        }\n        return new Blob([ab], { type: mimeString })\n    }\n    const blob = dataURItoBlob(reader.result)\n    // const blobFile = new File([blob], 'avatar', { type: blob.type })\n\n    const form = new FormData();\n    form.append(\"file\" , blob);\n\n    const options = {\n    method: 'POST',\n    url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/food/images/analyze',\n    headers: {\n        'content-type': 'multipart/form-data; boundary=---011000010111000001101001',\n        'x-rapidapi-host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\n        'x-rapidapi-key': 'ca34833afamsh5ac992bc1103a7fp14ff01jsne781a4ca7f2a'\n    },\n    data: form\n    };\n\n    axios.request(options).then(function (response) {\n        console.log(response.data);\n        setFoodData(response.data)\n    }).catch(function (error) {\n        console.error(error);\n    });\n}\n}\n\n  return  <div>\n            {/* First Line */}\n            <div className=\"user-box\">\n              <div className=\"discount card\" style={{'--delay': '.4s'}}>\n                <section className='controls'>\n                  {/* <input type=\"number\" placeholder='Calories (e.g 2000)' onChange={handleChange} /> */}\n                  {/* <input onKeyUp={this.handleKeyUp} ref={c => this.keyWordElement = c} type=\"text\" placeholder=\"enter the name you search\"/>&nbsp; */}\n                        {/* <input type=\"file\" id = \"curImg\"/>\n                        <button type = \"submit\" onClick={this.search}>Search</button> */}\n                         <input\n                            className='select-img-input'\n                            onChange={(e) => search(e)}\n                            type='file'\n                            name='fileSelect'\n                            accept='image/*'\n                        />\n                </section>\n                {/* <button onClick={getMealData}>Get Daily Meal Plan</button> */}\n                {foodData && <Food foodData={foodData} />}\n              </div> \n            </div>\n          </div>\n}\n      \n    "]},"metadata":{},"sourceType":"module"}