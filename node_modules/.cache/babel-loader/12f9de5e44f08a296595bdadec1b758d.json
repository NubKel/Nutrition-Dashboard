{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\Nutrition-Dashboard\\\\src\\\\component\\\\PictureMatch\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Food from './food';\nimport axios from 'axios';\nimport './picture.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PictureMatch() {\n  _s();\n\n  const [foodData, setFoodData] = useState(null);\n\n  function search(e) {\n    localStorage.isloading = true;\n    e.preventDefault(); //获取图片文件，图片类型，图片大小\n\n    const file = e.target.files[0];\n    const type = file.type;\n    const size = file.size;\n    const regularType = ['image/png', 'image/jpg', 'image/jpeg']; //图片类型限制\n\n    if (regularType.indexOf(type.toLowerCase()) === -1) {\n      // Toast.fail('Only supports PNG images!')\n      return false;\n    } //图片大小限制\n\n\n    if (size && size > 5242880) {\n      // 5 * 1024 * 1024，size的单位是字节\n      // Toast.fail('The image size should less than 5M!')\n      return false;\n    } //图片文件转成base64格式\n\n\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onloadend = () => {\n      // setImgPreviewUrl(reader.result)\n      console.log(reader);\n      localStorage.picture = reader.result; //Base64转换成二进制\n\n      const dataURItoBlob = dataURI => {\n        const byteString = atob(dataURI.split(',')[1]);\n        const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n        const ab = new ArrayBuffer(byteString.length);\n        const ia = new Uint8Array(ab);\n\n        for (let i = 0; i < byteString.length; i++) {\n          ia[i] = byteString.charCodeAt(i);\n        }\n\n        return new Blob([ab], {\n          type: mimeString\n        });\n      };\n\n      const blob = dataURItoBlob(reader.result); // const blobFile = new File([blob], 'avatar', { type: blob.type })\n\n      const form = new FormData();\n      form.append(\"file\", blob);\n      const options = {\n        method: 'POST',\n        url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/food/images/analyze',\n        headers: {\n          'content-type': 'multipart/form-data; boundary=---011000010111000001101001',\n          'x-rapidapi-host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\n          'x-rapidapi-key': 'ca34833afamsh5ac992bc1103a7fp14ff01jsne781a4ca7f2a'\n        },\n        data: form\n      };\n      axios.request(options).then(function (response) {\n        console.log(response.data);\n        setFoodData(response.data);\n        localStorage.isloading = false;\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-box\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"discount card\",\n        style: {\n          '--delay': '.4s'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"controls\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"select-img-input\",\n            onChange: e => search(e),\n            type: \"file\",\n            name: \"fileSelect\",\n            accept: \"image/*\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 26\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 17\n        }, this), foodData && /*#__PURE__*/_jsxDEV(Food, {\n          foodData: foodData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 11\n  }, this);\n}\n\n_s(PictureMatch, \"84hg0EQ0+VhbGfaP+rhpwEazJq0=\");\n\n_c = PictureMatch;\n\nvar _c;\n\n$RefreshReg$(_c, \"PictureMatch\");","map":{"version":3,"sources":["C:/Users/user/Desktop/Nutrition-Dashboard/src/component/PictureMatch/index.jsx"],"names":["React","useState","Food","axios","PictureMatch","foodData","setFoodData","search","e","localStorage","isloading","preventDefault","file","target","files","type","size","regularType","indexOf","toLowerCase","reader","FileReader","readAsDataURL","onloadend","console","log","picture","result","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","blob","form","FormData","append","options","method","url","headers","data","request","then","response","catch","error"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Food from './food';\r\nimport axios from 'axios';\r\nimport './picture.css'\r\n\r\nexport default function PictureMatch() {\r\n  const [foodData, setFoodData] = useState(null);\r\n\r\n\r\n  function search(e) {\r\n    localStorage.isloading = true\r\n    e.preventDefault()\r\n//获取图片文件，图片类型，图片大小\r\n    const file = e.target.files[0]\r\n    const type = file.type\r\n    const size = file.size\r\n    const regularType = ['image/png', 'image/jpg', 'image/jpeg']\r\n//图片类型限制\r\n    if (regularType.indexOf(type.toLowerCase()) === -1) {\r\n    // Toast.fail('Only supports PNG images!')\r\n    return false\r\n    }\r\n//图片大小限制\r\n    if (size && size > 5242880) {\r\n    // 5 * 1024 * 1024，size的单位是字节\r\n    // Toast.fail('The image size should less than 5M!')\r\n    return false\r\n    }\r\n//图片文件转成base64格式\r\n    const reader = new FileReader()\r\n    reader.readAsDataURL(file)\r\n    reader.onloadend = () => {\r\n    // setImgPreviewUrl(reader.result)\r\n    console.log(reader);\r\n    localStorage.picture = reader.result\r\n    //Base64转换成二进制\r\n    const dataURItoBlob=(dataURI)=> {\r\n        const byteString = atob(dataURI.split(',')[1])\r\n        const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\r\n        const ab = new ArrayBuffer(byteString.length)\r\n        const ia = new Uint8Array(ab)\r\n        for (let i = 0; i < byteString.length; i++) {\r\n        ia[i] = byteString.charCodeAt(i)\r\n        }\r\n        return new Blob([ab], { type: mimeString })\r\n    }\r\n    const blob = dataURItoBlob(reader.result)\r\n    // const blobFile = new File([blob], 'avatar', { type: blob.type })\r\n\r\n    const form = new FormData();\r\n    form.append(\"file\" , blob);\r\n\r\n    const options = {\r\n    method: 'POST',\r\n    url: 'https://spoonacular-recipe-food-nutrition-v1.p.rapidapi.com/food/images/analyze',\r\n    headers: {\r\n        'content-type': 'multipart/form-data; boundary=---011000010111000001101001',\r\n        'x-rapidapi-host': 'spoonacular-recipe-food-nutrition-v1.p.rapidapi.com',\r\n        'x-rapidapi-key': 'ca34833afamsh5ac992bc1103a7fp14ff01jsne781a4ca7f2a'\r\n    },\r\n    data: form\r\n    };\r\n\r\n    axios.request(options).then(function (response) {\r\n        console.log(response.data);\r\n        setFoodData(response.data);\r\n        localStorage.isloading = false\r\n    }).catch(function (error) {\r\n        console.error(error);\r\n    });\r\n}\r\n}\r\n\r\n  return  <div>\r\n            {/* First Line */}\r\n            <div className=\"user-box\">\r\n              <div className=\"discount card\" style={{'--delay': '.4s'}}>\r\n                <section className='controls'>\r\n                  {/* <input type=\"number\" placeholder='Calories (e.g 2000)' onChange={handleChange} /> */}\r\n                  {/* <input onKeyUp={this.handleKeyUp} ref={c => this.keyWordElement = c} type=\"text\" placeholder=\"enter the name you search\"/>&nbsp; */}\r\n                        {/* <input type=\"file\" id = \"curImg\"/>\r\n                        <button type = \"submit\" onClick={this.search}>Search</button> */}\r\n                         <input\r\n                            className='select-img-input'\r\n                            onChange={(e) => search(e)}\r\n                            type='file'\r\n                            name='fileSelect'\r\n                            accept='image/*'\r\n                        />\r\n                </section>\r\n                {/* <button onClick={getMealData}>Get Daily Meal Plan</button> */}\r\n                \r\n                {foodData && <Food foodData={foodData} />}\r\n              </div> \r\n            </div>\r\n          </div>\r\n}\r\n      \r\n    "]},"metadata":{},"sourceType":"module"}